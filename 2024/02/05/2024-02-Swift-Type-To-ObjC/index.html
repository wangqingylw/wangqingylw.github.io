<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="iOS,Swift,Objective-C">
  <meta name="description" content="é’ˆå¯¹ method cannot be marked @objc because the type of the parameter cannot be represented in objective-c åšç®€å•æ¢³ç†å’Œæ€»ç»“">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Swift æ–¹æ³•æ¡¥æ¥åˆ° ObjC æ—¶æŠ¥ type cannot be represented | ckqing.home</title>
  
  <link rel="icon" href="/assets/favicon.jpg">
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">


  <!-- Gitalk -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script defer src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" id="gitalk-script"></script>
  

  

  
  <!-- Goole Ad -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3859880292446330" crossorigin="anonymous"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-43E779BM0G"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-43E779BM0G');
  </script>
  

  <!-- mermaid -->
  
    <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
    <script>
    if (window.mermaid) {
      mermaid.initialize({"startOnload":true,"theme":"default"});
    }
    </script>
  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(/assets/avatar.jpg); background-repeat: no-repeat; background-size: cover">
        </div>
    </section>
    <section class='menu'>
        <div>ckqing.home</div>
        
        
            <div>Wang Qing</div>
        
        <ul>
          
            <li class="Btn">
                <a href="/">Home</a>
            </li>
          
            <li class="Btn">
                <a href="/archives/">Archive</a>
            </li>
          
            <li class="Btn">
                <a href="/tags/">Tags</a>
            </li>
          
            <li class="Btn">
                <a href="/categories/">Categories</a>
            </li>
          
            <li class="Btn">
                <a href="/about/">About</a>
            </li>
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="mailto:wq.cyan@gmail.com" aria-label="mailto:wq.cyan@gmail.com">
                    <img src="/assets/email.svg" alt="email" />
                </a>
            
        
            
                <a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UCbxLA23tNs25YXY9jZJgq2w" aria-label="https://www.youtube.com/channel/UCbxLA23tNs25YXY9jZJgq2w">
                    <img src="/assets/youtube.svg" alt="youtube" />
                </a>
            
        
            
                <a target="_blank" rel="noopener" href="https://space.bilibili.com/4380662" aria-label="https://space.bilibili.com/4380662">
                    <img src="/assets/bilibili.svg" alt="bilibili" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>Swift æ–¹æ³•æ¡¥æ¥åˆ° ObjC æ—¶æŠ¥ type cannot be represented</h1>
    </header>
    <div class='ListMeta'>
  <time datetime="2024-02-05T07:17:46.000Z" itemprop="datePublished">
    2024-02-05
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/iOS/">iOS</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Swift/">Swift</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Objective-C/">Objective-C</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/tech/">tech</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/tech/iOS/">iOS</a> }
  </li>


  </ul>
  
</div>

    <section>
      <p>å·¥ç¨‹é‡Œ <code>Swift</code> å’Œ <code>Objective-C</code> æ··ç¼–å·²ç»æ˜¯å¸¸æ€ï¼Œç»å¸¸é‡åˆ° <code>Objective-C</code> ä»£ç å»è°ƒç”¨ <code>Swift</code> é‡Œçš„æ–¹æ³•ã€‚æœ€æ–°çš„ <code>Swift</code> éœ€è¦æ‰‹åŠ¨æ ‡æ³¨ <code>@objc</code> æ‰èƒ½æŠŠæ–¹æ³•æš´éœ²ã€‚ï¼ˆå°è±¡ä¸­ä¼¼ä¹åœ¨ <code>Swift 2.x</code> çš„æ—¶ä»£ï¼Œæ˜¯é»˜è®¤æš´éœ²ï¼‰</p>
<p>ä½†ç»å¸¸ä¼šé‡åˆ° <code>method cannot be marked @objc because the type of the parameter cannot be represented in objective-c</code> ç±»ä¼¼çš„é”™è¯¯ï¼Œç›´è§‰ä¸ºå‚æ•°ã€è¿”å›å€¼ï¼Œæ— æ³•ä» <code>Swift</code> æ¡¥æ¥åˆ° <code>Objective-C</code>ï¼Œæœ‰æ—¶å€™ä¸€çœ¼å°±çŸ¥é“ç¼ºäº†ä»€ä¹ˆï¼Œæœ‰æ—¶å€™åˆ™è¦æ€è€ƒåŠå¤©ï¼Œè¿™é‡Œç®€å•æ•´ç†ä¸€ä¸‹å‡ ç§å¸¸è§çš„æƒ…å†µã€‚</p>
<span id="more"></span>

<blockquote>
<p>ç¯å¢ƒ<br>Xcode 15.2<br>Swift 5.9</p>
</blockquote>
<h1 id="Swift-ç»“æ„ä½“-Struct"><a href="#Swift-ç»“æ„ä½“-Struct" class="headerlink" title="Swift ç»“æ„ä½“(Struct)"></a>Swift ç»“æ„ä½“(Struct)</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>Swift</code> <strong>ç»“æ„ä½“</strong>å’Œ <code>Objective-C</code> çš„<strong>ç»“æ„ä½“</strong>æ˜¯æµ‘ç„¶ä¸åŒçš„äº‹ç‰©ã€‚ <code>Swift</code> å€¾å‘äºå€¼ç±»å‹ï¼Œä¼šæ›´å¤šä½¿ç”¨ <code>Swift</code> ç»“æ„ä½“ï¼Œä½†éœ€è¦æš´éœ²ç»™ <code>Objective-C</code> çš„æ—¶å€™ï¼Œå°±ä¸å¤ªæ–¹ä¾¿äº†ã€‚ä½†åŸºç¡€åº“é‡Œå†…ç½®çš„ç»“æ„ä½“ï¼Œæ¯”å¦‚ <code>CGPoint</code> ç­‰ï¼Œè‹¹æœå¸®æˆ‘ä»¬åšäº†æ¡¥æ¥ï¼Œæ˜¯å¯ä»¥çš„ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ST</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyCls</span>: <span class="title class_">NSObject</span> &#123; <span class="comment">// ğŸš© NSObject is necessary, @objc is not necessary</span></span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: <span class="type">ST</span>) &#123; <span class="comment">// âŒ not ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc1</span>(<span class="params">st</span>: <span class="type">CGPoint</span>) &#123; <span class="comment">// âœ… ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc2</span>(<span class="params">st</span>: <span class="type">MyCls</span>) &#123; <span class="comment">// âœ… ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‹¹æœå®˜æ–¹é’ˆå¯¹ <code>Swift</code> ä¸­é€‰æ‹© <code>Class</code> è¿˜æ˜¯ <code>Structure</code> æœ‰ä¸€æ®µæè¿°ï¼Œè§ <a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/swift/choosing-between-structures-and-classes">Choosing Between Structures and Classes</a>ï¼Œå…¶ä¸­ä¸€æ®µèŠ‚é€‰ï¼š</p>
<blockquote>
<p><strong>Use Classes When You Need Objective-C Interoperability</strong><br>If you use an Objective-C API that needs to process your data, or you need to fit your data model into an existing class hierarchy defined in an Objective-C framework, you might need to use classes and class inheritance to model your data. For example, many Objective-C frameworks expose classes that you are expected to subclass.</p>
</blockquote>
<blockquote>
<p> <strong>å½“æ‚¨éœ€è¦ Objective-C äº’æ“ä½œæ€§æ—¶ä½¿ç”¨ç±»(Class)</strong><br> å¦‚æœæ‚¨ä½¿ç”¨éœ€è¦å¤„ç†æ•°æ®çš„ Objective-C APIï¼Œæˆ–è€…éœ€è¦å°†æ•°æ®æ¨¡å‹æ”¾å…¥ Objective-C æ¡†æ¶ä¸­å®šä¹‰çš„ç°æœ‰ç±»å±‚æ¬¡ç»“æ„ä¸­ï¼Œåˆ™å¯èƒ½éœ€è¦ä½¿ç”¨ç±»å’Œç±»ç»§æ‰¿æ¥å¯¹æ•°æ®è¿›è¡Œå»ºæ¨¡ã€‚ä¾‹å¦‚ï¼Œè®¸å¤š Objective-C æ¡†æ¶å…¬å¼€äº†æ‚¨å¸Œæœ›å­ç±»åŒ–çš„ç±»ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼Œé‡åˆ°éœ€è¦æš´éœ²ç»™ <code>Objective-C</code> çš„åœºæ™¯æ—¶ï¼Œè¿˜æ˜¯é€‰æ‹© <code>Class</code> å§ï¼Œæˆ–è€…ç”¨ <code>Class</code> åšä¸€å±‚å°è£…ã€‚</p>
<h1 id="Swift-æšä¸¾å‹-Enum"><a href="#Swift-æšä¸¾å‹-Enum" class="headerlink" title="Swift æšä¸¾å‹(Enum)"></a>Swift æšä¸¾å‹(Enum)</h1><p><code>Swift</code> çš„æšä¸¾å‹å¾ˆå¼ºå¤§ï¼Œé™¤äº†èƒ½æ˜¯ <code>Int</code>ã€<code>String</code> ä¹‹å¤–ï¼Œè¿˜èƒ½å¸¦å‚æ•°ã€‚å¦‚æœç”¨äº†é«˜çº§çš„ç‰¹æ€§ï¼Œä¹Ÿæ˜¯æ²¡æ³•æš´éœ²ç»™ <code>Objective-C</code>ã€‚å¦‚æœæƒ³æš´éœ²ç»™ <code>Objective-C</code>ï¼Œéœ€è¦æ»¡è¶³ <code>Int</code> ç±»å‹ä¸”è¡¥å…… <code>@objc</code> å‰ç¼€ï¼Œå½“ç„¶å¦‚æœé <code>Int</code> ç±»å‹ <code>@objc</code> ä¹ŸåŠ ä¸ä¸Šã€‚</p>
<p>åŒæ—¶ä¹Ÿæ­£å› ä¸ºè¿™ä¸ªæ¡ä»¶ï¼Œæ­¤æ—¶å¸¦å‚æšä¸¾å°±æ— æ³•ä½¿ç”¨äº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// @objc enum MyEnum: String // âŒ not okï¼Œ&#x27;@objc&#x27; enum raw type &#x27;String&#x27; is not an integer type</span></span><br><span class="line"><span class="comment">// enum MyEnum // âŒ not ok</span></span><br><span class="line"><span class="comment">// enum MyEnum: Int // âŒ not ok</span></span><br><span class="line"><span class="keyword">@objc</span> <span class="keyword">enum</span> <span class="title class_">MyEnum</span>: <span class="title class_">Int</span> &#123; <span class="comment">// âœ… ok</span></span><br><span class="line">  <span class="keyword">case</span> <span class="type">A</span></span><br><span class="line">  <span class="keyword">case</span> <span class="type">B</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: <span class="type">MyEnum</span>) &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Swift-åŸºç¡€æ•°æ®ç±»å‹-Intã€Bool-å¯é€‰ç±»å‹-Optional"><a href="#Swift-åŸºç¡€æ•°æ®ç±»å‹-Intã€Bool-å¯é€‰ç±»å‹-Optional" class="headerlink" title="Swift åŸºç¡€æ•°æ®ç±»å‹(Intã€Bool) + å¯é€‰ç±»å‹(Optional)"></a>Swift åŸºç¡€æ•°æ®ç±»å‹(Intã€Bool) + å¯é€‰ç±»å‹(Optional)</h1><p><code>Swift</code> çš„å¯é€‰ç±»å‹(Optional)ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå½±å“æš´éœ²ç»™ <code>Objective-C</code>ï¼Œå¯¹äºç»§æ‰¿è‡ª <code>NSObject</code> çš„ <strong>å¼•ç”¨ç±»å‹</strong>ï¼ŒåŠ ä¸Šå¯é€‰ç±»å‹æ˜¯æ²¡é—®é¢˜çš„ï¼Œæ¯•ç«Ÿ <code>Objective-C</code> ä¹Ÿæœ‰ <code>nil</code> æ¥æ‰¿æ¥ï¼Œä½†åŸºç¡€å€¼ç±»å‹ï¼Œå¦‚ <code>Int</code>ã€<code>Bool</code> å°±æ²¡æ³•å°†å¯¹åº”çš„å¯é€‰ç±»å‹ <code>Int?</code>ã€<code>Bool?</code> æš´éœ²ç»™ <code>Objective-C</code> äº†ã€‚</p>
<p>æ­¤æ—¶å¯ä»¥è€ƒè™‘å»é™¤å¯é€‰ç±»å‹ï¼Œæˆ–è€…æ”¹ç”¨ <code>NSNumber</code> ç±»ã€‚æ ¹æ®æ˜¯å¦æ˜¯å¯é€‰ç±»å‹ï¼Œ<code>Objective-C</code> ä¾§å±•ç°çš„åˆ™æ˜¯åˆ†åˆ«å¸¦æœ‰ <code>_Nonnull</code> å’Œ <code>_Nullable</code> æ ‡è¯†çš„å…¥å‚ã€‚è™½ç„¶å¦‚æœå¯¹ä¸ä¸Šï¼Œé»˜è®¤æ˜¯ <code>warning</code>ï¼Œä¸è¿‡å»ºè®®è¿˜æ˜¯å¼€å¯ <code>error</code>ï¼Œå¹¶ä¸¥æ ¼æŒ‰ç…§æ ‡è¯†å»å¤„ç†ï¼Œè¿™åŒæ—¶ä¹Ÿæ•™è‚²æˆ‘ä»¬ï¼Œ<code>Objective-C</code> ä¾§å¯¹äºæ˜¯å¦å¯ä»¥ä¸º <code>nil</code> çš„æ ‡è¯†ä¹Ÿè¦åšåˆ°ä¸¥è°¨è§„èŒƒï¼Œæ‰èƒ½æ›´å¥½çš„å’Œ <code>Swift</code> äº¤äº’ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: <span class="type">Bool</span>) &#123; <span class="comment">// âœ… ok in Objective-C is BOOL</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc1</span>(<span class="params">st</span>: <span class="type">Int</span>) &#123; <span class="comment">// âœ… ok in Objective-C is NSInteger</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc2</span>(<span class="params">st</span>: <span class="type">Bool</span>?) &#123; <span class="comment">// âŒ not ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc2</span>(<span class="params">st</span>: <span class="type">Int</span>?) &#123; <span class="comment">// âŒ not ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc2</span>(<span class="params">st</span>: <span class="type">NSNumber</span>) &#123; <span class="comment">// âœ… ok in Objective-C is NSNumber * _Nonnull</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc2</span>(<span class="params">st</span>: <span class="type">NSNumber</span>?) &#123; <span class="comment">// âœ… ok in Objective-C is NSNumber * _Nullable</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="inout"><a href="#inout" class="headerlink" title="inout"></a>inout</h1><p><code>Swift</code> é‡Œæä¾›äº† <code>inout</code> æ ‡è¯†ï¼Œå¯¹å…¥å‚çš„ä¿®æ”¹èƒ½å¤Ÿè¿”å›ç»™è°ƒç”¨æ–¹ï¼Œå¦‚æœå¸¦äº† <code>inout</code> åˆ™ä¸èƒ½æš´éœ²ç»™ <code>Objective-C</code>ï¼Œå¯é€‰çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨ <code>UnsafeMutablePointer</code>ã€‚å½“ç„¶è‡ªå·±å°è£…æˆä¸€ä¸ªå¯¹è±¡ç±»å‹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: <span class="keyword">inout</span> <span class="type">Bool</span>) &#123; <span class="comment">// âŒ not ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// in Objective-C is BOOL * _Nonnull</span></span><br><span class="line">    <span class="comment">// usage:</span></span><br><span class="line">    <span class="comment">//    BOOL st = NO;</span></span><br><span class="line">    <span class="comment">//    [[MyClass alloc] init] myFuncWithSt:&amp;st];</span></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">mFunc</span>(<span class="params">st</span>: <span class="type">UnsafeMutablePointer</span>&lt;<span class="type">Bool</span>&gt;) &#123; <span class="comment">// âœ… ok</span></span><br><span class="line">        <span class="comment">// do something ...</span></span><br><span class="line">        st.pointee <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ•°ç»„-Array"><a href="#æ•°ç»„-Array" class="headerlink" title="æ•°ç»„ Array"></a>æ•°ç»„ Array</h1><p>ä¸Šæ–‡æåˆ° <code>Int</code> ä¼šè¢«æ¡¥æ¥æˆ <code>NSInteger</code>ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ <code>[Int]</code> ä¼šè¢«æ¡¥æ¥æˆ <code>NSArray&lt;NSNumber *&gt;</code>ï¼Œä½¿ç”¨çš„æ—¶å€™åŠ¡å¿…æ³¨æ„ã€‚</p>
<p>ä½†èƒ½å¤Ÿè¢«è‹¹æœæ¡¥æ¥çš„éƒ½æ˜¯è‹¹æœæä¾›çš„åŸºç¡€ç±»å‹ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰çš„ <code>Swift</code> çš„ <code>Struct</code> åˆ™ä¸è¡Œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ST</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> y: <span class="type">Int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: [<span class="type">ST</span>]) &#123; <span class="comment">// âŒ not ok</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: [<span class="type">Int</span>]) &#123; <span class="comment">// âœ… ok in Objective-C is NSArray&lt;NSNumber *&gt; * _Nonnull</span></span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="async"><a href="#async" class="headerlink" title="async"></a>async</h1><p>é¢˜å¤–è¯ï¼Œå¦‚æœç”¨åˆ°äº† <code>Swift</code> å¼‚æ­¥ç¼–ç¨‹é‡Œçš„ <code>async</code> ç­‰ç‰¹æ€§ï¼Œå…¶å®ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸æš´éœ²ç»™ <code>Objective-C</code> çš„ï¼Œåªä¸è¿‡ä¼šé™„å¸¦ä¸€ä¸ªå›è°ƒçš„ <code>handler</code>ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@objc</span> <span class="keyword">class</span> <span class="title class_">MyClass</span>: <span class="title class_">NSObject</span> &#123;</span><br><span class="line">    <span class="comment">// âœ… ok ObjC is</span></span><br><span class="line">    <span class="comment">// - (void)myFuncWithSt:(NSNumber * _Nonnull)st completionHandler:(void (^ _Nonnull)(void))completionHandler;</span></span><br><span class="line">    <span class="keyword">@objc</span> <span class="keyword">func</span> <span class="title function_">myFunc</span>(<span class="params">st</span>: <span class="type">NSNumber</span>) <span class="keyword">async</span> &#123;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>æ€»ä½“æ¥è¯´ï¼Œ<code>Swift</code> è‡ªèº«å¤æ‚çš„è¯­æ³•ç‰¹æ€§ï¼Œå¯¼è‡´éƒ¨åˆ†æ— æ³•æš´éœ²ç»™ <code>Objective-C</code>ã€‚æ­¤æ—¶é‡åˆ°ç±»ä¼¼ <code>method cannot be marked @objc because the type of the parameter cannot be represented in objective-c</code> çš„æŠ¥é”™ï¼Œå¯ä»¥å…ˆæ’æŸ¥ä¸‹ï¼Œæ˜¯å¦æ˜¯ <code>Swift</code> ç‰¹æœ‰çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ <code>Swift</code> ç»“æ„ä½“ã€æšä¸¾å‹ï¼Œå¹¶å°è¯•è¡¥å…… <code>@objc</code> ç­‰æ ‡è¯†ã€‚å¦‚æœé‡åˆ°å›°å¢ƒï¼Œå¯ä»¥æ€è€ƒä¸‹ï¼Œå¦‚æœèƒ½æš´éœ²ç»™ <code>Objective-C</code>ï¼Œåœ¨  <code>Objective-C</code> é‚£è¾¹åº”è¯¥æ˜¯ä¸ªä»€ä¹ˆå½¢å¼ï¼Œå¦‚æœæ— æ³•å¾—å‡ºåˆç†çš„ç»“è®ºï¼Œé‚£åº”è¯¥å°±æ˜¯é—®é¢˜æ‰€åœ¨äº†ã€‚</p>
<p>è¿™é‡Œä»…åˆ—å‡ºäº†å¸¸è§éƒ¨åˆ†æƒ…å†µï¼Œå…¶ä»–æƒ…å†µå¦‚æœæƒ³åˆ°äº†å†è¡¥å……è¿›æ¥ã€‚</p>


      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            Published on&nbsp;
            <time datetime="2024-02-05T07:17:46.000Z" itemprop="datePublished">
              2024-02-05
            </time>
          </div>
          
            <div>
              tags: <ul class="TagsInline">
  <li class="meta-text">
  { <a href="/tags/iOS/">iOS</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Swift/">Swift</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Objective-C/">Objective-C</a> }
  </li>

</ul>
            </div>
          
      </section>
    

    <!-- disqus -->
    

    <!-- gitalk -->
    
      <section>
        <div id="gitalk-container"></div>

        <script type="text/javascript">
          var gitalkScript = document.getElementById('gitalk-script');

          if (gitalkScript) {
            gitalkScript.onload = function() {
              /* è¿™é‡Œä¸èƒ½ä¾èµ–ä»»ä½• js é€»è¾‘ï¼Œæ¯”å¦‚ window.locationï¼Œæ˜¯éå¸¸ä¸å‡†ç¡®çš„ï¼Œä¸€åˆ‡æ”¹ç”¨å˜é‡ */
              var gitalk = new Gitalk({
                clientID: '80bb2fb75b60505d4c6d',
                clientSecret: '892409c79a3f576897b2e5bb198b13d73102fc64',
                repo: 'wangqingylw.github.io.comment', // ä»“åº“åœ°å€
                owner: 'wangqingylw', // github ç”¨æˆ·å
                admin: ["wangqingylw"], // github ç”¨æˆ·å
                perPage: 20,
                id: '/2024/02/05/2024-02-Swift-Type-To-ObjC/', // æŸ¥æ‰¾ issus çš„æ¡ä»¶
                title: 'Swift æ–¹æ³•æ¡¥æ¥åˆ° ObjC æ—¶æŠ¥ type cannot be represented',
                body: 'https://www.ckqing.com/2024/02/05/2024-02-Swift-Type-To-ObjC/ Swift æ–¹æ³•æ¡¥æ¥åˆ° ObjC æ—¶æŠ¥ type cannot be represented'
              });
              gitalk.render("gitalk-container");
            };
          }
        </script>
      </section>
    

    
      <script>
        /* è¿™é‡Œæ‰‹å·¥è°ƒä¸€ä¸‹ mermaid çš„ initï¼Œå¦åˆ™æ‡’åŠ è½½åœºæ™¯ä¸ç”Ÿæ•ˆ */
        if (window.mermaid) {
          window.mermaid.init();
        }
      </script>
    
</article>

  
</div>

            <footer>
    <div>Â© 2024 - Wang Qing </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>
<!-- Temporarily block singlepager -->
<!-- 
<script src="/js/pager/dist/singlepager.js"></script>
 -->
<!-- <script>
var sp = new Pager('data-pager-shell')
</script> -->
</body>
</html>